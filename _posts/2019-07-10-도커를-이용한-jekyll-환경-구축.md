---
title: Docker를 이용한 Jekyll 환경 구축
tags: [docker, jekyll]
---

Jekyll과 Github Pages를 이용한 블로그를 쓰며 가장 불편한 점은 Jekyll 환경을 로컬에 구축하는 것이었다.

나는 Ruby와 친하지 않다. 그래서 Ruby 기반의 Jekyll 환경 구축 중 삽질을 하며 원치않는 파일들이 많이 생겼고, 지운디고 지웠지만 어딘가에 남아있는 것 같아서 찝찝하다.

이런 경험을 거친 후, 우연히 [Jekyll 블로그 docker로 한방에 올리기](https://jybaek.tistory.com/808) 포스트를 읽었다. 써보니 너무 편하고, 깔끔하고, 기분이 좋아서 '해당 내용' + '쓰면서 든 생각'을 정리해둔다.

## Jekyll 컨테이너 만들기

먼저 Github의 블로그 저장소를 클론하고 해당 디렉토리로 이동한다.

```bash
git clone git@github.com:[your-id]/[your-id].github.io.git
cd [your-id].github.io
```

다음은 Jekyll 컨테이너를 만들며 Bash 명령을 실행시킨다.

```bash
docker container run --name blog --volume="$PWD:/srv/jekyll" -p 4000:4000 -it jekyll/jekyll bash
```

컨테이너가 생성되고 Bash Shell에 연결되면 Jekyll을 실행시킨다.

```bash
jekyll serve --watch
```

그리고 [http://localhost:4000](http://localhost:4000)에 접속하면 로컬환경에서 빌드된 내 블로그를 볼 수 있다.

### Jekyll이 아닌 Bash를 실행시킨 이유

Jekyll의 `--watch` 옵션을 통해 변경사항들을 자동적용 시킬 수 있지만, _config.yml 같은 일부 파일들은 주시 대상에서 제외된다. 제외된 파일들의 수정사항을 적용하려면 Jekyll을 재실행해야한다.

```bash
docker container run --name blog --volume="$PWD:/srv/jekyll" -p 4000:4000 -it jekyll/jekyll jekyll serve --watch
```

위와 같이 컨테이너를 생성하면 바로 Jekyll이 실행되며, 참고한 블로그에서도 이를 사용하고 있다. 하지만 Jekyll을 재실행하려면 컨테이너를 재시작해야한다. 나는 좀 더 가볍게 Jekyll만 재실행하고싶어서 컨테이너에서 Bash를 실행시키는 방식을 선택했다.

## 컨테이너 재시작 및 연결 방법

```bash
docker restart blog
docker attach blog
```

위 명령으로 연결 후 Jekyll 관련 명령을 실행시키면 된다.

## 참고

[Jekyll 블로그 docker로 한방에 올리기](https://jybaek.tistory.com/808)
